<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>ExploreBaga</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #c7f5c4, #e6ffe3);
      padding: 20px;
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      max-width: 520px;
    }

    button {
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      background: #2e7d32;
      color: white;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }

    input, select {
      padding: 8px;
      font-size: 16px;
      width: 100%;
      margin-top: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    ul {
      padding-left: 18px;
    }

    .small {
      font-size: 14px;
      color: #444;
    }
  </style>
</head>

<body>

  <!-- EXPLORATOR (ADAUGAT) -->
  <div class="card">
    <h3>ðŸ‘¤ Explorator</h3>

    <select id="exploratorSelect"></select>

    <input type="text" id="exploratorNou" placeholder="explorator nou">

    <button id="selectExploratorBtn">SelecteazÄƒ explorator</button>
  </div>

  <!-- CARD VECHI -->
  <div class="card">
    <h2>ðŸ’³ Card ExploreBaga</h2>
    <p><strong>Explorator:</strong> <span id="exploratorNume">â€”</span></p>
    <p><strong>Sold curent:</strong> <span id="sold">0</span> â‚¬</p>
  </div>

  <!-- ALIMENTARE VECHE -->
  <div class="card">
    <h3>ðŸ“¦ AlimenteazÄƒ automat</h3>

    <label>NumÄƒr capsule:</label>
    <input type="number" id="capsuleInput" placeholder="ex: 100">

    <button id="alimenteazaBtn">Introdu capsule</button>

    <p class="small">
      1 capsulÄƒ = 2 â‚¬ <br>
      CÃ¢È™tig explorator: 50%
    </p>
  </div>

  <!-- ISTORIC VECHI -->
  <div class="card">
    <h3>ðŸ“œ Istoric alimentÄƒri</h3>
    <ul id="istoric"></ul>
  </div>

  <!-- INFO PAI -->
  <div class="card">
    <h3>ðŸª™ Moneda Pai (VIITOR)</h3>
    <p class="small">
      CÃ¢È™tigurile sunt Ã®n <strong>EURO</strong>.  
      Pai va fi creatÄƒ doar dupÄƒ Ã®ndeplinirea activitÄƒÈ›ilor reale ale cluburilor.
    </p>
    <p class="small"><strong>Pai = rezultat, nu promisiune.</strong></p>
  </div>

  <!-- SCRIPT -->
  <script>
    const pretCapsula = 2;

    const exploratorSelect = document.getElementById('exploratorSelect');
    const exploratorNou = document.getElementById('exploratorNou');
    const selectExploratorBtn = document.getElementById('selectExploratorBtn');

    const exploratorNumeSpan = document.getElementById('exploratorNume');
    const soldSpan = document.getElementById('sold');
    const capsuleInput = document.getElementById('capsuleInput');
    const alimenteazaBtn = document.getElementById('alimenteazaBtn');
    const istoricUl = document.getElementById('istoric');

    // STRUCTURA VECHE + EXPLORATORI
    let exploratori = JSON.parse(localStorage.getItem('explorebaga_exploratori')) || {};
    let exploratorCurent = null;

    function salveaza() {
      localStorage.setItem('explorebaga_exploratori', JSON.stringify(exploratori));
    }

    function refreshSelect() {
      exploratorSelect.innerHTML = '<option value="">â€” alege â€”</option>';
      Object.keys(exploratori).forEach(nume => {
        const opt = document.createElement('option');
        opt.value = nume;
        opt.textContent = nume;
        exploratorSelect.appendChild(opt);
      });
    }

    refreshSelect();

    selectExploratorBtn.onclick = () => {
      let nume = exploratorNou.value.trim() || exploratorSelect.value;

      if (!nume) {
        alert('Alege sau creeazÄƒ un explorator');
        return;
      }

      if (!exploratori[nume]) {
        exploratori[nume] = { sold: 0, istoric: [] };
        salveaza();
        refreshSelect();
      }

      exploratorCurent = nume;
      incarcaExplorator();
    };

    function incarcaExplorator() {
      const data = exploratori[exploratorCurent];
      exploratorNumeSpan.textContent = exploratorCurent;
      soldSpan.textContent = data.sold.toFixed(2);

      istoricUl.innerHTML = '';
      data.istoric.forEach(t => {
        const li = document.createElement('li');
        li.textContent = t;
        istoricUl.appendChild(li);
      });
    }

    alimenteazaBtn.onclick = () => {
      if (!exploratorCurent) {
        alert('SelecteazÄƒ un explorator');
        return;
      }

      const capsule = Number(capsuleInput.value);
      if (!capsule || capsule <= 0) {
        alert('Introdu un numÄƒr valid de capsule');
        return;
      }

      const valoare = capsule * pretCapsula;
      const castig = valoare * 0.5;

      const data = exploratori[exploratorCurent];
      data.sold += castig;

      const text =
        `Capsule: ${capsule} | Valoare: ${valoare} â‚¬ | CÃ¢È™tig: ${castig} â‚¬`;
      data.istoric.push(text);

      salveaza();
      incarcaExplorator();

      capsuleInput.value = '';
    };
  </script>

</body>
</html>