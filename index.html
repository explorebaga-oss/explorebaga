<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ExploreBaga</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="app">
    <h1>ğŸŒ ExploreBaga</h1>

    <div class="card">
      <p>ExploreazÄƒ oameni, cluburi È™i idei din jurul tÄƒu.</p>
    </div>

    <!-- RADAR -->
    <div id="radar" class="radar hidden"></div>

    <div class="card">
      <button id="scanBtn">ğŸ” ExploreazÄƒ Ã®n jur</button>
    </div>

    <div class="card hidden" id="results"></div>

    <div class="card">
      <button id="clubsBtn">ğŸ² Cluburi ExploreBaga</button>
    </div>

    <!-- CARD EXPLOREBAGA -->
    <div class="card explore-card">
      <h3>ğŸ’³ Card ExploreBaga</h3>

      <p><strong>Explorator:</strong> Fafi</p>
      <p><strong>Acces:</strong> Alimentare automate ExploreBaga</p>
      <p><strong>CÃ¢È™tig:</strong> 50% din valoarea capsulelor introduse</p>

      <p><strong>Sold curent:</strong> <span id="balance">0</span> Pai</p>

      <div class="card-actions">
        <button id="loadMachineBtn">ğŸ“¦ Introdu capsule Ã®n automat</button>
      </div>
    </div>
  </div>

  <script>
    /* SERVICE WORKER */
    if ('serviceWorker' in navigator &&
        (location.protocol === 'https:' || location.hostname === 'localhost')) {
      navigator.serviceWorker.register('service-worker.js');
    }

    /* RADAR + EXPLORARE */
    const scanBtn = document.getElementById('scanBtn');
    const results = document.getElementById('results');
    const radar = document.getElementById('radar');
    const clubsBtn = document.getElementById('clubsBtn');

    scanBtn.onclick = () => {
      radar.classList.remove('hidden');
      results.classList.add('hidden');

      setTimeout(() => {
        radar.classList.add('hidden');
        results.classList.remove('hidden');

        results.innerHTML = `
          <h3>ğŸ“¡ Descoperiri Ã®n jurul tÄƒu</h3>
          <ul class="results-list">
            <li>ğŸ§ Andrei â€“ Explorator urban <span>25 m</span></li>
            <li>ğŸ¨ Club: Desen liber Ã®n parc <span>120 m</span></li>
            <li>ğŸƒ Club: Alergarea care te trezeÈ™te <span>300 m</span></li>
          </ul>
          <p class="hint">(simulare Bluetooth / Wi-Fi Direct)</p>
        `;
      }, 2000);
    };

    clubsBtn.onclick = () => {
      alert('ğŸ² Clubul zilei: Desen liber Ã®n parc');
    };

    /* CARD EXPLOREBAGA â€“ PLATÄ‚ INSTANT */
    let balance = 0;

    const balanceEl = document.getElementById('balance');
    const loadMachineBtn = document.getElementById('loadMachineBtn');

    loadMachineBtn.onclick = () => {
      const capsules = 10;
      const pricePerCapsule = 10;
      const commissionRate = 0.5;

      const totalValue = capsules * pricePerCapsule;
      const payout = totalValue * commissionRate;

      balance += payout;
      balanceEl.textContent = balance.toFixed(2);

      alert(
        'ğŸ“¦ Automat alimentat!\n\n' +
        `Capsule: ${capsules}\n` +
        `Valoare: ${totalValue} Pai\n` +
        `ğŸ’³ CÃ¢È™tig instant: ${payout} Pai`
      );
    };
  </script>
</body>
</html>